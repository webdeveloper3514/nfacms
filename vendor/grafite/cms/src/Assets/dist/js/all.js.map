{"version":3,"sources":["cms.js","forms.js","dashboard.js","modules.js","dropzone-custom.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["\n/*\n|--------------------------------------------------------------------------\n| Generals\n|--------------------------------------------------------------------------\n*/\n\n$(function () {\n    // $(\".non-form-btn\").bind(\"click\", function(e){\n    //     e.preventDefault();\n    // });\n\n    // $(\".delete-btn\").bind(\"click\", function(e){\n    //     e.preventDefault();\n    //     $('#deleteModal').modal('toggle');\n    //     var _parentForm = $(this).parent('form');\n    //     $('#deleteBtn').bind('click', function(){\n    //         _parentForm[0].submit();\n    //     });\n    // });\n\n    // $(\".delete-link-btn\").bind(\"click\", function(e){\n    //     e.preventDefault();\n    //     $('#deleteLinkModal').modal('toggle');\n    //     var _parentForm = $(this).parent('form');\n    //     $('#deleteLinkBtn').bind('click', function(){\n    //         _parentForm[0].submit();\n    //     });\n    // });\n\n    // $(\".delete-btn-confirm\").bind(\"click\", function(e){\n    //     e.preventDefault();\n    // });\n\n    // $('form.add, form.edit').submit(function(){\n    //     $('.loading-overlay').show();\n    // });\n\n    // $('a.slow-link').click(function(){\n    //     $('.loading-overlay').show();\n    // });\n\n    // $(window).resize(function(){\n    //     _setDashboard();\n    // });\n\n    // _setDashboard();\n});\n\n/*\n|--------------------------------------------------------------------------\n| Notifications - Growl Style\n|--------------------------------------------------------------------------\n*/\n\nfunction cmsNotify(message, _type) {\n    // $(\".cms-notification\").css(\"display\", \"block\");\n    // $(\".cms-notification\").addClass(_type);\n\n    // $(\".cms-notify-comment\").html(message);\n    // $(\".cms-notification\").animate({\n    //     right: \"20px\",\n    // });\n\n    // $(\".cms-notify-closer-icon\").click(function(){\n    //     $(\".cms-notification\").animate({\n    //         right: \"-300px\"\n    //     },\"\", function(){\n    //         $(\".cms-notification\").css(\"display\", \"none\");\n    //         $(\".cms-notify-comment\").html(\"\");\n    //     });\n    // });\n\n    // setTimeout(function(){\n    //     $(\".cms-notification\").animate({\n    //         right: \"-300px\"\n    //     },\"\", function(){\n    //         $(\".cms-notification\").css(\"display\", \"none\");\n    //         $(\".cms-notify-comment\").html(\"\");\n    //     });\n    // }, 8000);\n}\n\n/*\n|--------------------------------------------------------------------------\n| Twitter Typeahead - Taken straight from Twitter's docs\n|--------------------------------------------------------------------------\n*/\n\nvar typeaheadMatcher = function (strs) {\n    // return function findMatches(q, cb) {\n    //     var matches, substringRegex;\n\n    //     // an array that will be populated with substring matches\n    //     matches = [];\n\n    //     // regex used to determine if a string contains the substring `q`\n    //     substrRegex = new RegExp(q, 'i');\n\n    //     // iterate through the pool of strings and for any string that\n    //     // contains the substring `q`, add it to the `matches` array\n    //     $.each(strs, function(i, str) {\n    //         if (substrRegex.test(str)) {\n    //             matches.push(str);\n    //         }\n    //     });\n\n    //     cb(matches);\n    // };\n};\n","/*\n|--------------------------------------------------------------------------\n| Grafite CMS\n|--------------------------------------------------------------------------\n*/\n\nvar _redactorConfig = {\n    toolbar: true,\n    visual: true,\n    minHeight: 175,\n    convertVideoLinks: true,\n    imageUpload: true,\n    buttonSource: true,\n    replaceDivs: false,\n    paragraphize: false,\n    pastePlaintext: true,\n    deniedTags: ['script'],\n    imageManagerJson: _url+'/cms/api/images/list',\n    fileManagerJson: _url+'/cms/api/files/list',\n    stockImageManagerJson: 'https://pixabay.com/api/',\n    plugins: ['table','video', 'fontcolor', 'imagemanager', 'stockimagemanager', 'filemanager', 'specialchar', 'insertIcon'],\n    buttons: ['html', 'formatting', 'fontcolor', 'bold', 'italic', 'underline', 'deleted', 'unorderedlist', 'orderedlist',\n          'outdent', 'indent', 'image', 'filemanager', 'stockimagemanager', 'video', 'link', 'alignment', 'horizontalrule', 'insertIcon'], // + 'underline'\n};\n\n$(window).load(function() {\n\n    $('.pull-down').each(function() {\n        var height = 300 - $(this).siblings('.thumbnail').height() - $(this).height() - 48;\n        $(this).css('margin-top', height);\n    });\n\n    $('textarea.redactor').redactor(_redactorConfig);\n});\n\n$(function () {\n    var _initialUrlValue = $('#Url').val();\n\n    function _urlPrepare (title) {\n        return title.replace(/[^\\w\\s]/gi, '').replace(/ /g, '-').toLowerCase();\n    }\n\n    $('#Title, #Name').bind('keyup', function () {\n        if (_initialUrlValue == '') {\n            $('#Url').val(_urlPrepare($(this).val()));\n        }\n    });\n\n    $('.timepicker').datetimepicker({\n        format: 'LT',\n        timeZone: _appTimeZone\n    });\n\n    $('.datepicker').datetimepicker({\n        format: 'YYYY-MM-DD',\n        timeZone: _appTimeZone\n    });\n\n    $('.datetimepicker').datetimepicker({\n        showTodayButton: true,\n        format: 'YYYY-MM-DD HH:mm',\n        timeZone: _appTimeZone\n    });\n\n    $('.tags').tagsinput();\n});\n","/*\n|--------------------------------------------------------------------------\n| Dashboard Panel\n|--------------------------------------------------------------------------\n*/\n\nfunction _setDashboard () {\n    // if ($(window).width() < 768) {\n    //     $('.sidebar').css({\n    //         left: '-300px',\n    //     });\n\n    //     $('.sidebar-menu-btn .nav-open').unbind().bind('click', function(){\n    //         $('.overlay').fadeIn();\n    //         $('.sidebar').animate({\n    //             left: 0\n    //         }, 'fast');\n    //         $('.sidebar-menu-btn .nav-open').hide();\n    //         $('.sidebar-menu-btn .nav-close').show();\n    //     });\n    //     $('.sidebar-menu-btn .nav-close').unbind().bind('click', function(){\n    //         $('.overlay').fadeOut();\n    //         $('.sidebar').animate({\n    //             left: '-'+$(window).width()+'px',\n    //         }, 'fast');\n    //         $('.sidebar-menu-btn .nav-close').hide();\n    //         $('.sidebar-menu-btn .nav-open').show();\n    //     });\n    //     $('.overlay').unbind().bind('click', function(){\n    //         $('.overlay').fadeOut();\n    //         $('.sidebar').animate({\n    //             left: '-'+$(window).width()+'px',\n    //         }, 'fast');\n    //     });\n    // } else {\n    //     $('.sidebar-menu-btn').remove();\n    //     $('.sidebar').css({\n    //         left: 0\n    //     });\n    // }\n}\n","/*\n * --------------------------------------------------------------------------\n * General\n * --------------------------------------------------------------------------\n*/\n\n$(document).ready(function () {\n    $('[data-toggle=\"tooltip\"]').tooltip();\n});\n\n/*\n * --------------------------------------------------------------------------\n * Links\n * --------------------------------------------------------------------------\n*/\n\nif ($('#External').is(':checked')) {\n    $('#External_url').parent().show();\n    $('#Page_id').parent().hide();\n} else {\n    $('#External_url').parent().hide();\n    $('#Page_id').parent().show();\n}\n\n$(window).ready(function(){\n    $('#External').bind('click', function() {\n        if ($(this).is(':checked')) {\n            $('#External_url').parent().show();\n            $('#Page_id').parent().hide();\n        } else {\n            $('#External_url').parent().hide();\n            $('#Page_id').parent().show();\n        }\n    });\n});\n\nvar linkList = document.getElementById('linkList');\n\nif (typeof linkList != 'undefined' && linkList != null) {\n    var sortable = Sortable.create(linkList, {\n        store: {\n            get: function (sortable) {\n                return _linkOrder ? _linkOrder : [];\n            },\n            set: function (sortable) {\n                var _order = sortable.toArray();\n                $.ajax({\n                    url: _cmsUrl + '/menus/' + _id + '/order',\n                    type: 'put',\n                    data: {\n                        _token: _token,\n                        order: JSON.stringify(_order)\n                    },\n                    success: function (_data) {\n                        // do nothing!\n                    }\n                });\n            }\n        }\n    });\n}\n\n/*\n * --------------------------------------------------------------------------\n * Files\n * --------------------------------------------------------------------------\n*/\n\n$(function () {\n    $('#saveFilesBtn').click(function(e){\n        e.preventDefault();\n        Dropzone.forElement('.dropzone').processQueue();\n    });\n});\n\nfunction confirmDelete (url) {\n    $('#deleteBtn').attr('href', url);\n    $('#deleteModal').modal('toggle');\n}\n\n/*\n * --------------------------------------------------------------------------\n * Images\n * --------------------------------------------------------------------------\n*/\n\n$(function () {\n    $('#saveImagesBtn').click(function(e){\n        e.preventDefault();\n        Dropzone.forElement('.dropzone').processQueue();\n    });\n\n    $('.selectable').bind('click', function () {\n        if (!$(this).hasClass('selected-highlight')) {\n            $(this).addClass('selected-highlight');\n        } else {\n            $(this).removeClass('selected-highlight');\n        }\n    });\n\n    $('.bulk-image-delete').click(function () {\n        var _images = [];\n        $('.selected-highlight').each(function () {\n            _images.push($(this).attr('data-id'));\n        });\n\n        if (_images.length > 0) {\n            $('#bulkImageDeleteModal').modal('toggle');\n            var _deleteUrl = _url + '/cms/images/bulk-delete/' + _images.join('-')\n            $('#bulkImageDelete').attr('href', _deleteUrl);\n        }\n    });\n\n    $('.img-alter-btn').click(function (e) {\n        e.stopPropagation();\n    });\n});\n\n/*\n * --------------------------------------------------------------------------\n * Previews\n * --------------------------------------------------------------------------\n*/\n\n$('.preview-toggle').bind('click', function () {\n    if ($(this).attr('data-platform') == 'desktop') {\n        $('#frame').css({\n            width: '150%'\n        });\n    }\n    if ($(this).attr('data-platform') == 'mobile') {\n        $('#frame').css({\n            width: '320px'\n        });\n    }\n});\n\n$('#frame').load(function () {\n    var frameBody = $('#frame').contents().find('body');\n    $('a', frameBody).click(function(e){\n        e.preventDefault();\n    });\n});\n\n/*\n * --------------------------------------------------------------------------\n * Pages and Blocks\n * --------------------------------------------------------------------------\n*/\n\n$(function () {\n    $('.add-block-btn').bind('click', function (e) {\n        e.preventDefault();\n        $('#blockName').val('');\n        $('#addBlockModal').modal('toggle');\n    });\n\n    $('#addBlockBtn').bind('click', function () {\n        var _slug = $('#blockName').val();\n        $('.blocks').prepend('<div id=\"block_container_'+_slug+'\" class=\"col-md-12\"><div class=\"form-group\"><h4>'+_slug+'<button type=\"button\" class=\"btn btn-xs btn-danger delete-block-btn pull-right\"><span class=\"fa fa-trash\"></span></button></h4><textarea id=\"block_'+_slug+'\" name=\"block_'+_slug+'\" class=\"form-control redactor\"></textarea></div></div>');\n        $('#addBlockModal').modal('toggle');\n        $('#block_'+_slug).redactor(_redactorConfig);\n    });\n\n    $('.delete-block-btn').bind('click', function (e) {\n        e.preventDefault();\n        $('#deleteBlockBtn').attr('data-slug', $(this).attr('data-slug'));\n        $('#deleteBlockModal').modal('toggle');\n    });\n\n    $('#deleteBlockBtn').bind('click', function () {\n        $('#'+$(this).attr('data-slug')).remove();\n        $('#deleteBlockModal').modal('toggle');\n    });\n});\n","Dropzone.options.fileDropzone = {\n    paramName: \"location\",\n    addRemoveLinks: true,\n    autoProcessQueue: false,\n    init: function() {\n        this.on(\"success\", function(file, responseText) {\n            file.serverData = responseText.data;\n            $(['name', 'original', 'mime', 'size']).each(function() {\n                $(\"#fileDetailsForm\").prepend('<input id=\"file_'+file.serverData.name+'\" name=\"location['+file.serverData.name+']['+this+']\" value=\"'+file.serverData[this]+'\" type=\"hidden\" />');\n            });\n            this.options.autoProcessQueue = true;\n        });\n        this.on(\"queuecomplete\", function(){\n            $('#fileDetailsForm').submit();\n        });\n        this.on(\"removedfile\", function(file) {\n            if (! file.serverData) {\n                return;\n            } else {\n                $.get(_url+\"/cms/files/remove/\"+file.serverData.name);\n                $(\"#file_\"+file.serverData.name).remove();\n            }\n        });\n    },\n    accept: function(file, done) {\n        done();\n    }\n};"]}